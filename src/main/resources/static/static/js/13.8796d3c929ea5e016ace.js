webpackJsonp([13],{"N9p+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Dd8w"),o=i.n(s),n=(i("IcnI"),i("NYxO")),a=i("UBpT"),r=i("CqtB"),l=i("/o5o"),d={name:"FriendsBlock",props:{friend:Boolean,admin:Boolean,blocked:Boolean,moderator:Boolean,info:{type:Object,default:function(){return{first_name:"Артем",last_name:"Иващенко",birth_date:1559751301818,town_id:1,photo:"/static/img/user/1.jpg",id:124}}}},components:{Modal:l.a},data:function(){return{modalShow:!1,modalType:"delete"}},computed:o()({},Object(n.c)("profile/dialogs",["dialogs"]),{modalText:function(){return"delete"===this.modalType?"Вы уверены, что хотите удалить пользователя "+this.info.first_name+" "+this.info.last_name+" из друзей?":"deleteModerator"===this.modalType?"Вы уверены, что хотите удалить "+this.info.first_name+" "+this.info.last_name+" из списка модераторов?":"Вы уверены, что хотите заблокировать пользователя "+this.info.first_name+" "+this.info.last_name+"?"}}),methods:o()({},Object(n.b)("profile/friends",["apiAddFriends","apiDeleteFriends"]),Object(n.b)("users/actions",["apiBlockUser","apiUnblockUser"]),{closeModal:function(){this.modalShow=!1},openModal:function(e){this.modalType=e,this.modalShow=!0},sendMessage:function(e){this.$router.push({name:"Im",query:{userId:e}})},onConfrim:function(e){var t=this;"delete"===this.modalType?this.apiDeleteFriends(e).then(function(){return t.closeModal()}):"deleteModerator"===this.modalType?console.log("delete moderator"):this.apiBlockUser(e).then(function(){return t.closeModal()})}})},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"friends-block"},[i("div",{staticClass:"friends-block__img"},[i("img",{attrs:{src:e.info.photo,alt:e.info.first_name}})]),i("div",{staticClass:"friends-block__info"},[i("router-link",{staticClass:"friends-block__name",attrs:{to:{name:"ProfileId",params:{id:e.info.id}}}},[e._v(e._s(e.info.first_name)+" "+e._s(e.info.last_name))]),e.moderator?i("span",{staticClass:"friends-block__age-city"},[e._v("модератор")]):e.info.birth_date&&e.info.city?i("span",{staticClass:"friends-block__age-city"},[e._v(e._s(e._f("moment")(e.info.birth_date,"from",!0))+", "+e._s(e.info.city))]):i("span",{staticClass:"friends-block__age-city"},[e._v("профиль не заполнен")])],1),i("div",{staticClass:"friends-block__actions"},[e.moderator?[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Редактировать",expression:"'Редактировать'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block"},[i("simple-svg",{attrs:{filepath:"/static/img/edit.svg"}})],1),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Удалить из списка",expression:"'Удалить из списка'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block",on:{click:function(t){return e.openModal("deleteModerator")}}},[i("simple-svg",{attrs:{filepath:"/static/img/delete.svg"}})],1)]:e.admin?[e.blocked?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Разблокировать",expression:"'Разблокировать'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block"},[i("simple-svg",{attrs:{filepath:"/static/img/unblocked.svg"}})],1):i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Заблокировать",expression:"'Заблокировать'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block"},[i("simple-svg",{attrs:{filepath:"/static/img/blocked.svg"}})],1)]:[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Написать сообщение",expression:"'Написать сообщение'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block message",on:{click:function(t){return e.sendMessage(e.info.id)}}},[i("simple-svg",{attrs:{filepath:"/static/img/sidebar/im.svg"}})],1),e.friend?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Отклонить запрос",expression:"'Отклонить запрос'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block delete",on:{click:function(t){return e.openModal("delete")}}},[i("simple-svg",{attrs:{filepath:"/static/img/delete.svg"}})],1):i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Добавить в друзья",expression:"'Добавить в друзья'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block add",on:{click:function(t){return e.apiAddFriends(e.info.id)}}},[i("simple-svg",{attrs:{filepath:"/static/img/friend-add.svg"}})],1),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Добавить в друзья",expression:"'Добавить в друзья'",modifiers:{bottom:!0}}],staticClass:"friends-block__actions-block",on:{click:function(t){return e.apiAddFriends(e.info.id)}}},[i("simple-svg",{attrs:{filepath:"/static/img/friend-add.svg"}})],1)]],2),i("modal",{model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e.modalText?i("p",[e._v(e._s(e.modalText))]):e._e(),i("template",{slot:"actions"},[i("button-hover",{nativeOn:{click:function(t){return e.onConfrim(e.info.id)}}},[e._v("Да")]),i("button-hover",{attrs:{variant:"red",bordered:"bordered"},nativeOn:{click:function(t){return e.closeModal(t)}}},[e._v("Отмена")])],1)],2)],1)},staticRenderFns:[]};var f=i("VU/8")(d,c,!1,function(e){i("X3l4")},null,null).exports,m={name:"Friends",components:{FriendsPossible:a.a,FriendsBlock:r.a,FriendsRequest:f},data:function(){return{first_name:""}},computed:o()({},Object(n.c)("profile/friends",["getResultById"]),{friends:function(){var e=this;return 0===this.first_name.length?this.getResultById("friends"):this.getResultById("friends").filter(function(t){return-1!==t.first_name.toLowerCase().indexOf(e.first_name.toLowerCase())})},requestFrend:function(){var e=this;return 0===this.first_name.length?this.getResultById("requestFrends"):this.getResultById("requestFrends").filter(function(t){return-1!==t.first_name.toLowerCase().indexOf(e.first_name.toLowerCase())})}}),methods:o()({},Object(n.b)("profile/friends",["apiFriends","requestFrends"])),beforeRouteEnter:function(e,t,i){i(function(e){e.apiFriends()})},created:function(){this.requestFrends()}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"friends inner-page"},[i("div",{staticClass:"inner-page__main"},[i("div",{staticClass:"friends__header"},[i("h2",{staticClass:"friends__title"},[e._v("Мои друзья")]),i("div",{staticClass:"friends__search"},[i("div",{staticClass:"friends__search-icon"},[i("simple-svg",{attrs:{filepath:"/static/img/search.svg"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.first_name,expression:"first_name"}],staticClass:"friends__search-input",attrs:{placeholder:"Начните вводить имя друга..."},domProps:{value:e.first_name},on:{input:function(t){t.target.composing||(e.first_name=t.target.value)}}})])]),i("div",{staticClass:"friends__list"},e._l(e.friends,function(e){return i("friends-block",{key:e.id,attrs:{friend:"friend",info:e}})}),1),e.requestFrend.length>0?i("div",{staticClass:"friends__header"},[i("h2",{staticClass:"friends__title"},[e._v("Запросы в друзья")])]):e._e(),i("div",{staticClass:"friends__list"},e._l(e.requestFrend,function(e){return i("friends-request",{key:e.id,attrs:{friend:"friend",info:e}})}),1)]),i("div",{staticClass:"inner-page__aside"},[i("friends-possible")],1)])},staticRenderFns:[]},_=i("VU/8")(m,u,!1,null,null,null);t.default=_.exports},X3l4:function(e,t){}});
//# sourceMappingURL=13.8796d3c929ea5e016ace.js.map